# 拓元搶票助手 - 瀏覽器擴充功能

## 🚀 新功能說明

這個版本的擴充功能已經整合了原本桌面程式的搶票功能，現在可以直接在瀏覽器中完成整個搶票流程！

## 📋 功能特色

### 🎯 自動搶票流程

1. **自動進入購票** - 場次頁面的購買按鈕出現時自動點擊進入
2. **智慧票種選擇** - 根據設定的關鍵字自動選擇合適的票種
3. **驗證碼識別** - 使用 AI 自動識別並填寫驗證碼(統計正確率大概 90%，但遇到較難辨識的驗證碼還是有可能會辨識錯誤)
4. **自動提交訂單** - 可選擇是否自動提交購票訂單

### ⚙️ 設定選項

- **API 連線** - 測試 OCR 的 API KEY 是否能成功調用 API
- **自動搶票開關** - 控制是否啟用自動點擊購買按鈕
- **票種關鍵字篩選** - 設定偏好的票種關鍵字（如：VIP、搖滾區）
- **購票數量** - 設定要購買的票券數量（1-4 張）
- **自動提交** - 是否在填寫完成後自動提交訂單

## 🔧 使用方法

### 1. 安裝擴充功能

1. 打開 Chrome 瀏覽器
2. 前往 `chrome://extensions/`
3. 開啟「開發者模式」
4. 點擊「載入未封裝項目」
5. 選擇 `tixcraft_extension` 資料夾

### 2. 測試 API 連線（重要！）

1. 點擊瀏覽器右上角的擴充功能圖示
2. **輸入 API KEY，並點擊「🔌 測試 API 連線」按鈕**
3. 等待顯示「✅ API 連線測試成功」
4. 這步驟很重要，否則會無法自動驗證碼識別

### 3. 設定搶票參數

在擴充功能彈出視窗中設定：

- 🔄 自動跳轉到場次頁面 (detail → game) - **搶票時建議開啟**
- ✅ 自動選擇場次
- ✅ 自動選擇票種
- 🎫 輸入票種關鍵字（例如：VIP,1F,搖滾區）
- 💳 選擇購票數量
- ⚡ 決定是否自動提交

### 4. 開始搶票

1. 先登入拓元會員帳號
2. 前往想要搶票的活動頁面
3. 確認擴充功能設定正確
4. 等待開賣時間，擴充功能會自動執行

## 📍 支援的頁面類型

- **活動詳情頁** (`/activity/detail/*`) - 查看活動詳情
- **場次選擇頁** (`/activity/game/*`) - 自動選擇場次
- **票種選擇頁** (`/ticket/area/*`) - 根據關鍵字選擇票種
- **購票頁面** (`/ticket/ticket/*`) - 自動填寫驗證碼和提交

## 🎯 使用技巧

### 關鍵字設定範例

```
VIP,搖滾區          # 優先選擇VIP或搖滾區
1F,2F             # 選擇1樓或2樓
3000,2800         # 根據價格篩選
```

### 注意事項

- 🔌 **重要：務必先測試 API 連線** - 輸入 API KEY 點擊擴充功能中的「🔌 測試 API 連線」按鈕
- 📧 **領取 API KEY** - 請寄信至nswer_kyle@portonmail.com領取 API KEY
- 🔄 **搶票效率提升** - 開啟「自動跳轉到場次頁面」可以更快進入搶票流程
- 📋 **平時瀏覽** - 關閉自動跳轉可以正常瀏覽活動詳情頁面
- 📱 請確保已登入拓元會員
- 🎫 關鍵字留空會選擇第一個可用票種
- ⚡ 建議測試時先關閉「自動提交」功能
- ⚠️ 如果未測試連線或 API KEY 是錯的就儲存設定，系統會顯示警告（可忽略但不建議）

## 🛡️ 安全提醒

- ✅ 本擴充功能運行在真實瀏覽器環境中，避免了 Cloudflare 檢測問題
- ✅ 使用用戶已登入的 session，無需額外認證
- ✅ 所有操作都在用戶瀏覽器本地執行
- ⚠️ 請遵守拓元網站使用條款
- ⚠️ 僅供學習研究使用

## 🔄 狀態說明

擴充功能會顯示目前狀態：

- **🔄 執行中** - 正在監控或執行搶票流程
- **⏸️ 待命** - 已載入但等待觸發條件
- **✅ 啟用** - 自動搶票功能已開啟
- **❌ 停用** - 自動搶票功能已關閉

## 🐛 疑難排解

### 常見問題

1. **擴充功能無反應**

   - 確認已在拓元網站頁面中
   - 檢查控制台是否有錯誤訊息
   - 重新載入頁面

2. **找不到票種**

   - 檢查關鍵字設定是否正確
   - 嘗試清空關鍵字使用預設選擇
   - 確認該場次確實有票

3. **驗證碼識別失敗**
   - 確認伺服器已喚醒
   - 檢查網路連線
   - 手動重新整理頁面

## 📊 版本更新

### v2.0 新功能

- 整合完整搶票流程
- 新增票種關鍵字篩選
- 改進使用者介面
- 增加狀態監控
- 優化自動化邏輯

---

🎫 **祝您搶票成功！** 🎫
